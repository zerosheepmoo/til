(self.webpackChunktil=self.webpackChunktil||[]).push([[709],{8544:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var n=a(6252);const l=(0,n.uE)('<h1 id="permissions"><a class="header-anchor" href="#permissions">#</a> Permissions</h1><p>Deno 는 기본값이 secure 하다. 따라서 특정 무언가를 enable로 지정하지 않는다면, 다음 목록에 접근이 불가능하다.</p><ul><li>file</li><li>network</li><li>environment</li><li>등등..</li></ul><p>보안에 민감한 구역(security-sensitive areas)이나 함수에 접근하기 위해서는 permission의 사용이 요구되는데, 커맨드 라인을 통해서 부여할 수 있다.</p><p>다음은 <code>mod.ts</code>를 실행할 때 파일 시스템에 read-only 접근을 부여하는 예시다. 쓰기 등의 다른 보안에 관련하여 민감한 함수에는 접근할 수는 없다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>deno run --allow-read mod.ts\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="permissions-list"><a class="header-anchor" href="#permissions-list">#</a> Permissions list</h2><ul><li><code>-A</code>, <code>--allow-all</code>: Allow all permissions. This disables all security.</li><li><code>--allow-env</code>: Allow environment access for things like getting and setting of environment variables.</li><li><code>--allow-hrtime</code>: Allow high-resolution time measurement. High-resolution time can be used in timing attacks and fingerprinting.</li><li><code>--allow-net=&lt;allow-net&gt;</code>: Allow network access. You can specify an optional, comma-separated list of domains to provide an allow-list of allowed domains.</li><li><code>--allow-plugin</code>: Allow loading plugins. Please note that <code>--allow-plugin</code> is an unstable feature. <code>--allow-read=&lt;allow-read&gt;</code>: Allow file system read access. You can specify an optional, comma-separated list of directories or files to provide a allow-list of allowed file system access.</li><li><code>--allow-run</code>: Allow running subprocesses. Be aware that subprocesses are not run in a sandbox and therefore do not have the same security restrictions as the deno process. Therefore, use with caution.</li><li><code>--allow-write=&lt;allow-write&gt;</code>: Allow file system write access. You can specify an optional, comma-separated list of directories or files to provide a allow-list of allowed file system access.</li></ul><h2 id="permissions-allow-list"><a class="header-anchor" href="#permissions-allow-list">#</a> Permissions allow-list</h2><p>granularity(세분성)를 제어하는 것을 위해 몇 permissions을 allow-lists로 제공한다.</p><p>다음은 allow-lists로 <code>/usr</code> 디렉토리만 파일 접근을 제한한다. 하지만, <code>/etc</code> 디렉토리는 허용하지 않게 된다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ deno run --allow-read<span class="token operator">=</span>/usr <span class="token operator">&lt;</span>https://deno.land/std@0.95.0/examples/cat.ts<span class="token operator">&gt;</span> /etc/passwd\nerror: Uncaught PermissionDenied: <span class="token builtin class-name">read</span> access to <span class="token string">&quot;/etc/passwd&quot;</span>, run again with the --allow-read flag\n► <span class="token variable">$deno</span>$/dispatch_json.ts:40:11\n    at DenoError <span class="token punctuation">(</span><span class="token variable">$deno</span>$/errors.ts:20:5<span class="token punctuation">)</span>\n    <span class="token punctuation">..</span>.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>/etc</code>를 allow-list하는 것으로 올바르게 permission 을 주면 성공한다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>deno run --allow-read<span class="token operator">=</span>/etc <span class="token operator">&lt;</span>https://deno.land/std@0.95.0/examples/cat.ts<span class="token operator">&gt;</span> /etc/passwd\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>--allow-write</code> 도 똑같다.</p><h2 id="network-access"><a class="header-anchor" href="#network-access">#</a> Network access</h2><p>fetch.ts:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;https://deno.land/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>hosts/urls 을 allow-list 하는 방법에 대한 예시다.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>deno run --allow-net<span class="token operator">=</span>github.com,deno.land fetch.ts\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>만약 <code>fetch.ts</code>가 다른 도메인에서 network connection을 establish 하려 시도하면, 프로세스는 실패로 돌아간다.</p><p>어떠한 url도 허용하게 할려면 다음과 같이 하자.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>deno run --allow-net fetch.ts\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="conference"><a class="header-anchor" href="#conference">#</a> Conference</h2>',24),o=(0,n.Uk)("Ryan Dahl. (September 25, 2020). "),t={href:"https://www.youtube.com/watch?v=r5F6dekUmdE#t=34m57",target:"_blank",rel:"noopener noreferrer"},i=(0,n.Uk)("The Deno security model"),r=(0,n.Uk)(". Speakeasy JS."),c={render:function(e,s){const a=(0,n.up)("OutboundLink");return(0,n.wg)(),(0,n.j4)(n.HY,null,[l,(0,n.Wm)("p",null,[o,(0,n.Wm)("a",t,[i,(0,n.Wm)(a)]),r])],64)}}},3632:(e,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>n});const n={key:"v-0f596588",path:"/runtime/deno/deno-permission.html",title:"Permissions",lang:"ko-KR",frontmatter:{sidebar:"auto",prev:"./deno-basic.md",next:"introduction.md"},excerpt:"",headers:[{level:2,title:"Permissions list",slug:"permissions-list",children:[]},{level:2,title:"Permissions allow-list",slug:"permissions-allow-list",children:[]},{level:2,title:"Network access",slug:"network-access",children:[]},{level:2,title:"Conference",slug:"conference",children:[]}],filePathRelative:"runtime/deno/deno-permission.md",git:{updatedTime:1620047774e3}}}}]);